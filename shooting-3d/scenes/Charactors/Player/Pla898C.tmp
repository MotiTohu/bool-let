[gd_scene load_steps=15 format=3 uid="uid://cq74t5frsjjhg"]

[ext_resource type="PackedScene" uid="uid://duod78noy4hw6" path="res://scenes/Charactors/Charactor.tscn" id="1_q74oe"]
[ext_resource type="Texture2D" uid="uid://b6ibc3j1gevwv" path="res://assets/sprites/player/player_4.png" id="2_lfbbg"]
[ext_resource type="Script" path="res://scenes/Charactors/Player/player.gd" id="2_xo378"]
[ext_resource type="Texture2D" uid="uid://c8jkj5sjjqktj" path="res://assets/sprites/player/player_3.png" id="3_o122x"]
[ext_resource type="Texture2D" uid="uid://ceteik2qdsohe" path="res://assets/sprites/player/player_2.png" id="4_8cww4"]
[ext_resource type="Texture2D" uid="uid://db6ak5o5hp3r8" path="res://assets/sprites/player/player_blaster.png" id="4_cakl2"]
[ext_resource type="Texture2D" uid="uid://chlhpjbnw26aq" path="res://assets/sprites/player/player_1.png" id="5_00ile"]

[sub_resource type="BoxShape3D" id="BoxShape3D_7mdvl"]
size = Vector3(8, 4.15649, 10)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_mss88"]
transparency = 1
albedo_texture = ExtResource("2_lfbbg")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_osoo5"]
transparency = 1
albedo_texture = ExtResource("3_o122x")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_02ybj"]
transparency = 1
albedo_texture = ExtResource("4_8cww4")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_swyd5"]
transparency = 1
albedo_texture = ExtResource("5_00ile")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_rpf8i"]
transparency = 1
albedo_texture = ExtResource("4_cakl2")

[sub_resource type="GDScript" id="GDScript_l7kch"]
resource_name = "Blaster"
script/source = "extends Sprite3D

@export var follow_weight := 10.0
@export var z_offset := 0.2
@export_category(\"float\")
@export var float_speed := 1.0
@export var float_weight := 50.0

var delta_sum := 0.0
func _physics_process(delta:float)->void:
	rotation.z += (get_parent().rotation.z - rotation.z) * delta * follow_weight 
	var to = get_parent().global_position - global_position
	to.z -= z_offset
	to.z *= 3
	global_position += to * delta * follow_weight
	
	delta_sum = fmod(delta_sum + delta * float_speed,PI*2)
	offset.y = sin(delta_sum) * float_weight
"

[node name="Player" instance=ExtResource("1_q74oe")]
collision_layer = 1
script = ExtResource("2_xo378")
SPEED = 600.0
DEPTH_SPEED = 3.0
ROTATE_SPEED = 3.0
MOVE_DEPTH = 5.0
shoot_mode = 1

[node name="CollisionShape3D" parent="." index="0"]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, 0, 0.0692505, 1.43229)
shape = SubResource("BoxShape3D_7mdvl")

[node name="ShootInterval" type="Timer" parent="." index="1"]
process_callback = 0
wait_time = 0.2
one_shot = true

[node name="Body" type="Sprite3D" parent="." index="2"]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 0, 0, -0.05)
material_override = SubResource("StandardMaterial3D_mss88")
texture = ExtResource("2_lfbbg")

[node name="Body2" type="Sprite3D" parent="." index="3"]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 0, 0, 0.0637744)
material_override = SubResource("StandardMaterial3D_osoo5")
texture = ExtResource("3_o122x")

[node name="Body3" type="Sprite3D" parent="." index="4"]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 0, 0, 0.216973)
material_override = SubResource("StandardMaterial3D_02ybj")
texture = ExtResource("4_8cww4")

[node name="Body4" type="Sprite3D" parent="." index="5"]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 0, 0, 0.467238)
material_override = SubResource("StandardMaterial3D_swyd5")
texture = ExtResource("5_00ile")

[node name="Blaster" type="Sprite3D" parent="." index="6"]
transform = Transform3D(0.3, 0, 0, 0, 0.3, 0, 0, 0, 0.3, 0, 0, -0.139124)
top_level = true
material_override = SubResource("StandardMaterial3D_rpf8i")
texture = ExtResource("4_cakl2")
script = SubResource("GDScript_l7kch")

[node name="Aiming" type="RayCast3D" parent="." index="7"]
target_position = Vector3(0, 0, -200)
collision_mask = 2
collide_with_areas = true
debug_shape_custom_color = Color(1, 1, 0, 1)
debug_shape_thickness = 5

[connection signal="on_hp_lost" from="." to="." method="_on_player_hp_lost"]
[connection signal="timeout" from="ShootInterval" to="." method="_on_shoot_interval_timeout"]
